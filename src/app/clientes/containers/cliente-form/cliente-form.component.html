<section class="cliente-form">
  <form [formGroup]="formulario" id="formulario">
    <h5><strong>Cadastro de Cliente:</strong></h5>

    <br />
    <h6><strong>Informações Cliente:</strong></h6>
    <br />

    <div class="espaco-dentro">
      <div class="row">
        <div class="col-md-9">
          <mat-form-field class="form-grid">
            <mat-label>Nome:</mat-label>
            <input
              matInput
              name="nome"
              placeholder="Digite o Nome"
              formControlName="nome"
              #nome
              (input)="convertToUppercase('nome')"
            />
            <mat-hint align="end">{{ nome.value.length || 0 }} / 100</mat-hint>
            @if (formulario.get("nome")?.invalid) {
              <mat-error>
                {{ formUtils.getMensagemErro(formulario, "nome") }}</mat-error
              >
            }
          </mat-form-field>
        </div>

        <div class="col-md-3">
          <mat-form-field class="form-grid">
            <mat-label>CPF/CNPJ:</mat-label>
            <input
              matInput
              name="cpfCnpj"
              placeholder="Digite o CPF ou CNPJ"
              formControlName="cpfCnpj"
              (input)="onCpfCnpjInput($event)"
            />
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col-md-9">
          <mat-form-field class="form-grid">
            <mat-label>Razão Social:</mat-label>
            <input
              matInput
              name="razaoSocial"
              placeholder="Digite a Razão Social"
              formControlName="razaoSocial"
              (input)="convertToUppercase('razaoSocial')"
            />
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col-md-3">
          <mat-form-field class="form-grid">
            <mat-label>Telefone:</mat-label>
            <span matTextPrefix>+55</span>
            <input
              matInput
              name="telefone"
              formControlName="telefone"
              (input)="onTelefoneOuCelularInput($event, 'telefone')"
            />
          </mat-form-field>
        </div>
        <div class="col-md-3">
          <mat-form-field class="form-grid">
            <mat-label>Celular:</mat-label>
            <span matTextPrefix>+55</span>
            <input
              matInput
              name="celular"
              formControlName="celular"
              (input)="onTelefoneOuCelularInput($event, 'celular')"
            />
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field class="form-grid">
            <mat-label>E-mail:</mat-label>
            <input
              matInput
              name="email"
              placeholder="Ex. pat@example.com"
              formControlName="email"
              (input)="convertToUppercase('email')"
            />
            @if (formulario.get("email")?.invalid) {
              <mat-error>
                {{ formUtils.getMensagemErro(formulario, "email") }}</mat-error
              >
            }
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <mat-form-field class="form-grid">
            <mat-label>Contatos Adicionais:</mat-label>
            <input
              matInput
              name="contatosAdicionais"
              placeholder="Informações adicionais referente ao contato"
              formControlName="contatosAdicionais"
              (input)="convertToUppercase('contatosAdicionais')"
            />
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col-md-3">
          <mat-form-field class="form-grid">
            <mat-label>CEP:</mat-label>
            <input
              matInput
              name="cep"
              placeholder="Digite o CEP"
              formControlName="cep"
              (blur)="consultaCEP()"
            />
            @if (formulario.get("cep")?.invalid) {
              <mat-error>
                {{ formUtils.getMensagemErro(formulario, "cep") }}</mat-error
              >
            }
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col-md-9">
          <mat-form-field class="form-grid">
            <mat-label>Logradouro:</mat-label>
            <input
              matInput
              name="logradouro"
              formControlName="logradouro"
              (input)="convertToUppercase('logradouro')"
            />
            @if (formulario.get("logradouro")?.invalid) {
              <mat-error>
                {{
                  formUtils.getMensagemErro(formulario, "logradouro")
                }}</mat-error
              >
            }
          </mat-form-field>
        </div>
        <div class="col-md-3">
          <mat-form-field class="form-grid">
            <mat-label>Número:</mat-label>
            <input matInput name="numero" formControlName="numero" />
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col-md-9">
          <mat-form-field class="form-grid">
            <mat-label>Complemento:</mat-label>
            <input
              matInput
              placeholder="Ex. Apto 55"
              name="complemento"
              formControlName="complemento"
              (input)="convertToUppercase('complemento')"
            />
          </mat-form-field>
        </div>
        <div class="col-md-3">
          <mat-form-field class="form-grid">
            <mat-label>Bairro:</mat-label>
            <input
              matInput
              name="bairro"
              formControlName="bairro"
              (input)="convertToUppercase('bairro')"
            />
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col-md-9">
          <mat-form-field class="form-grid">
            <mat-label>Cidade:</mat-label>
            <input
              matInput
              placeholder="Ex. Santo André"
              name="cidade"
              formControlName="cidade"
              (input)="convertToUppercase('cidade')"
            />
          </mat-form-field>
        </div>
        <div class="col-md-3">
          <mat-form-field class="form-grid">
            <mat-label>UF:</mat-label>
            <input
              matInput
              placeholder="Ex. São Paulo"
              name="estado"
              formControlName="estado"
              (input)="convertToUppercase('estado')"
            />
          </mat-form-field>
        </div>
      </div>
    </div>

    <br />
    <h6><strong>Endereço de Entrega:</strong></h6>

    <div class="espaco-dentro">
      <br />

      <tr>
        <mat-slide-toggle
          color="blue"
          (change)="onToggleChange($event)"
          [checked]="isAdressChecked"
        >
          Entregar no mesmo endereço do cliente:
        </mat-slide-toggle>
      </tr>

      <br />

      <div class="row">
        <div class="col-md-3">
          @if (isAdressChecked) {
            <mat-form-field class="form-grid" appearance="outline">
              <mat-label>CEP:</mat-label>
              <input
                tabindex="-1"
                readonly="true"
                matInput
                name="cepEntrega"
                formControlName="cepEntrega"
              />
            </mat-form-field>
          } @else {
            <mat-form-field class="form-grid">
              <mat-label>CEP:</mat-label>
              <input
                matInput
                name="cepEntrega"
                placeholder="Digite o CEP"
                formControlName="cepEntrega"
                (blur)="consultaCEP()"
              />
              @if (formulario.get("cepEntrega")?.invalid) {
                <mat-error>
                  {{
                    formUtils.getMensagemErro(formulario, "cepEntrega")
                  }}</mat-error
                >
              }
            </mat-form-field>
          }
        </div>
      </div>

      <div class="row">
        @if (isAdressChecked) {
          <div class="col-md-9">
            <mat-form-field class="form-grid" appearance="outline">
              <mat-label>Logradouro:</mat-label>
              <input
                tabindex="-1"
                readonly="true"
                matInput
                name="logradouroEntrega"
                formControlName="logradouroEntrega"
                (input)="convertToUppercase('logradouroEntrega')"
              />
            </mat-form-field>
          </div>
          <div class="col-md-3">
            <mat-form-field class="form-grid" appearance="outline">
              <mat-label>Número:</mat-label>
              <input
                tabindex="-1"
                readonly="true"
                matInput
                name="numeroEntrega"
                formControlName="numeroEntrega"
              />
            </mat-form-field>
          </div>
        } @else {
          <div class="col-md-9">
            <mat-form-field class="form-grid">
              <mat-label>Logradouro:</mat-label>
              <input
                matInput
                name="logradouroEntrega"
                placeholder="Digite o logradouro"
                formControlName="logradouroEntrega"
                (input)="convertToUppercase('logradouroEntrega')"
              />
              @if (formulario.get("logradouroEntrega")?.invalid) {
                <mat-error>
                  {{
                    formUtils.getMensagemErro(formulario, "logradouroEntrega")
                  }}</mat-error
                >
              }
            </mat-form-field>
          </div>
          <div class="col-md-3">
            <mat-form-field class="form-grid">
              <mat-label>Número:</mat-label>
              <input
                matInput
                name="numeroEntrega"
                placeholder="Digite o número"
                formControlName="numeroEntrega"
              />
              @if (formulario.get("numeroEntrega")?.invalid) {
                <mat-error>
                  {{
                    formUtils.getMensagemErro(formulario, "numeroEntrega")
                  }}</mat-error
                >
              }
            </mat-form-field>
          </div>
        }
      </div>

      <div class="row">
        @if (isAdressChecked) {
          <div class="col-md-9">
            <mat-form-field class="form-grid" appearance="outline">
              <mat-label>Complemento:</mat-label>
              <input
                tabindex="-1"
                readonly="true"
                matInput
                name="complementoEntrega"
                formControlName="complementoEntrega"
                (input)="convertToUppercase('complementoEntrega')"
              />
            </mat-form-field>
          </div>
          <div class="col-md-3">
            <mat-form-field class="form-grid" appearance="outline">
              <mat-label>Bairro:</mat-label>
              <input
                tabindex="-1"
                readonly="true"
                matInput
                name="bairroEntrega"
                formControlName="bairroEntrega"
                (input)="convertToUppercase('bairroEntrega')"
              />
            </mat-form-field>
          </div>
        } @else {
          <div class="col-md-9">
            <mat-form-field class="form-grid">
              <mat-label>Complemento:</mat-label>
              <input
                matInput
                name="complementoEntrega"
                placeholder="Ex. Apto 55"
                formControlName="complementoEntrega"
                (input)="convertToUppercase('complementoEntrega')"
              />
            </mat-form-field>
          </div>
          <div class="col-md-3">
            <mat-form-field class="form-grid">
              <mat-label>Bairro:</mat-label>
              <input
                matInput
                name="bairroEntrega"
                placeholder="Digite o bairro"
                formControlName="bairroEntrega"
                (input)="convertToUppercase('bairroEntrega')"
              />
            </mat-form-field>
          </div>
        }
      </div>

      <div class="row">
        @if (isAdressChecked) {
          <div class="col-md-9">
            <mat-form-field class="form-grid" appearance="outline">
              <mat-label>Cidade:</mat-label>
              <input
                tabindex="-1"
                readonly="true"
                matInput
                name="cidadeEntrega"
                formControlName="cidadeEntrega"
                (input)="convertToUppercase('cidadeEntrega')"
              />
            </mat-form-field>
          </div>
          <div class="col-md-3">
            <mat-form-field class="form-grid" appearance="outline">
              <mat-label>UF:</mat-label>
              <input
                tabindex="-1"
                readonly="true"
                matInput
                name="estadoEntrega"
                formControlName="estadoEntrega"
                (input)="convertToUppercase('estadoEntrega')"
              />
            </mat-form-field>
          </div>
        } @else {
          <div class="col-md-9">
            <mat-form-field class="form-grid">
              <mat-label>Cidade:</mat-label>
              <input
                matInput
                name="cidadeEntrega"
                placeholder="Digite a cidade"
                formControlName="cidadeEntrega"
                (input)="convertToUppercase('cidadeEntrega')"
              />
            </mat-form-field>
          </div>
          <div class="col-md-3">
            <mat-form-field class="form-grid">
              <mat-label>UF:</mat-label>
              <input
                matInput
                name="estadoEntrega"
                placeholder="Digite o estado. Ex: SP"
                formControlName="estadoEntrega"
                (input)="convertToUppercase('estadoEntrega')"
              />
            </mat-form-field>
          </div>
        }
      </div>
    </div>

    <br />
    <h6><strong>Informações Pedido:</strong></h6>
    <br />

    <div class="espaco-dentro">
      Forma de Pagamento:
      <div class="row">
        <div class="col-md-2">
          <mat-card-content>
            <section class="form-grid">
              <mat-checkbox
                class="checkbox-margin"
                (change)="onPaymentCheckBoxChange($event)"
                [checked]="isPaymentChecked"
              >
                Á Vista
              </mat-checkbox>
            </section>
          </mat-card-content>
        </div>
        <div class="col-md-2">
          <mat-card-content *ngIf="!isPaymentChecked">
            <section class="form-grid">
              <mat-form-field>
                <mat-label>Faturado:</mat-label>
                <mat-select
                  formControlName="tipoPgto"
                  (selectionChange)="onSelectChange($event)"
                >
                  <mat-option
                    *ngFor="let option of listaOpcoesPgto"
                    [value]="option"
                  >
                    {{ option }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </section>
          </mat-card-content>
        </div>
        <div class="col-md-8">
          <mat-form-field class="form-grid">
            <mat-label>Informações Adicionais do Faturamento:</mat-label>
            <input
              matInput
              name="infoPagamento"
              placeholder="Informações adicionais referente ao tipo de pagamento"
              formControlName="infoPagamento"
              (input)="convertToUppercase('infoPagamento')"
            />
          </mat-form-field>
        </div>
      </div>

      <br />

      <div class="row">
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>SFOBRAS:</mat-label>
            <input
              matInput
              name="sfobras"
              placeholder="Digite o SFOBRAS"
              formControlName="sfobras"
            />
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>CNO:</mat-label>
            <input
              matInput
              name="cno"
              placeholder="Digite o CNO"
              formControlName="cno"
            />
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>Inscrição Estadual:</mat-label>
            <input
              matInput
              name="ie"
              placeholder="Informe a IE"
              formControlName="ie"
            />
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>Mangueira:</mat-label>
            <input
              matInput
              name="mangueira"
              placeholder="Informe a mangueira"
              formControlName="mangueira"
              (input)="convertToUppercase('mangueira')"
            />
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>Valor Ajudante:</mat-label>
            <input
              matInput
              name="valorAjudante"
              formControlName="valorAjudante"
              maxlength="12"
            />
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>Valor Adicional:</mat-label>
            <input
              matInput
              name="valorAdicional"
              formControlName="valorAdicional"
              maxlength="12"
            />
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>Preço cx-5m³</mat-label>
            <input
              matInput
              name="precoCx5"
              formControlName="precoCx5"
              maxlength="12"
            />
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>Preço cx-10m³</mat-label>
            <input
              matInput
              name="precoCx10"
              formControlName="precoCx10"
              maxlength="12"
            />
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>Preço cx-15m³</mat-label>
            <input
              matInput
              name="precoCx15"
              formControlName="precoCx15"
              maxlength="12"
            />
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>Preço lav-5m³</mat-label>
            <input
              matInput
              name="precoLv5"
              formControlName="precoLv5"
              maxlength="12"
            />
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>Preço lav-10m³</mat-label>
            <input
              matInput
              name="precoLv10"
              formControlName="precoLv10"
              maxlength="12"
            />
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <mat-form-field class="form-grid">
            <mat-label>Preço lav-15m³</mat-label>
            <input
              matInput
              name="precoLv15"
              formControlName="precoLv15"
              maxlength="12"
            />
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <mat-form-field class="form-grid">
            <mat-label>Observações:</mat-label>
            <input
              matInput
              name="observacao"
              placeholder="Informações adicionais"
              formControlName="observacao"
              (input)="convertToUppercase('observacao')"
            />
          </mat-form-field>
        </div>
      </div>
    </div>

    <div class="acoes">
      <button (click)="onSubmit()" class="botao">Salvar</button>
      <button (click)="onCancel()" class="botao">Cancelar</button>
    </div>
  </form>
</section>
